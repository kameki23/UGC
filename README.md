# UGC動画量産スタジオ

静的エクスポート対応（Next.js 14 + TypeScript + Tailwind）のUGC動画企画/生成アプリです。  
**サーバ不要**・**GitHub Pages配信可能**な構成を維持しつつ、クラウド連携時は実生成も可能です。

## 重要な安全ポリシー

- 本ツール出力は **AI生成コンテンツ** です（必ず開示してください）。
- **なりすまし・誤認誘導・詐欺目的** の利用は禁止です。
- 人物画像を使う場合は **本人の明示同意** が必要です。
- このツールは **欺瞞的 impersonation（成り代わり）をサポートしません**。
- 生成物は自動公開されません。利用者が各出力をダウンロードして運用してください。

## 主な機能（最新）

- 3カラムUI（左:素材 / 中央:台本・言語・音声 / 右:シーン・バッチ生成）
- 常時表示の安全通知
- 追加素材アップロード
  - 人物画像
  - 背景画像
  - 手持ち商品画像
  - スマホ画面画像
  - 任意の保持ポーズ参考画像
  - 既存互換の「商品画像」「衣装リファレンス」
- コンポジション設定オブジェクト
  - 人物/背景/衣装/商品/スマホ/参考画像の位置・スケール・回転・透明度
- 同一人物マルチバリエーション生成
  - variation preset（stable / balanced / explore）
  - seed固定・再生成
  - 人物IDは維持しつつ、背景/衣装/シーン側を揺らす設計
- Append More（無限風の追記生成UX）
  - 1回は1〜20本に制限
  - ただしキュー連結で何度でも追加可能
- クラウドプロバイダ抽象化
  - ElevenLabs（TTS） + Sync（lip-sync動画）
  - overlay synthesis を明示モジュール化
  - APIキー未設定時はブラウザCanvasで現実的フォールバック合成
- ダウンロード改善
  - クラウド返却URLがある場合はそれを利用
  - URL未返却時もローカルplaceholder動画（webm）を生成して必ずDL可能
- プロジェクト保存/復元
  - localStorage（v2）
  - JSONインポート/エクスポート
  - v1互換マイグレーション

## セットアップ

```bash
npm install
npm run generate:data
npm run dev
```

## 新ワークフロー（推奨）

1. 左カラムで素材をアップロード
   - 人物画像（同意済み）
   - 背景、手持ち商品、スマホ画面
   - 必要なら保持ポーズ参考
2. 同意確認後、IDロック作成
3. 中央で台本テンプレ選択・台本編集・音声確認
4. 右でシーン、比率、バッチ本数、variation preset / seed を設定
5. `生成キュー開始` で初回投入
6. 追加で量産する場合は `さらに追加生成（Append More）`
7. 各行の `出力をダウンロード` から取得

## クラウド実生成モード

必要入力:

- ElevenLabs API Key
- ElevenLabs Voice ID
- Sync API Token
- （任意）Sync Model ID
- （任意）Overlay Provider API Key

> 注意: GitHub Pages上ではAPIキーがブラウザに保持されます。漏洩リスク回避のため権限を絞ったキー/使い捨てキー推奨。

## ビルド / エクスポート

```bash
npm run build
npm run export
```

`next.config.mjs` で `output: 'export'` を設定済みのため、静的ファイルを `out/` に出力します。

## 制約（現時点）

- ブラウザだけで本格的MP4エンコードは保証できないため、フォールバック動画は主にwebmで生成
- overlay cloud provider は抽象化済みだが、現実装は mock-cloud + browser fallback
- Sync側のモデル/レスポンス仕様変更時は `src/lib/cloud.ts` の調整が必要
- 長尺・大量キュー時、ブラウザ負荷により処理時間が増える

## 商用利用の範囲と制約

- 商用利用自体は可能ですが、以下を遵守してください。
  - 配信プラットフォーム規約
  - 景表法・著作権・肖像権・個人情報保護
  - AI生成表記（必要な媒体で明示）
- 第三者の顔/音声/ブランドを無断で模倣する使い方は禁止
- 本アプリはデモ生成基盤であり、法的適合性の最終責任は利用者にあります
